<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Missionaries & Cannibals Game</title>
<style>
    body {
        font-family: Arial, sans-serif;
        text-align: center;
        margin: 0;
        background: linear-gradient(to bottom, #cceeff, #ffffff);
    }
    h1 {
        text-shadow: 1px 1px 4px #00000055;
    }
    .game-container {
        width: 800px;
        height: 400px;
        margin: 40px auto;
        border: 3px solid #333;
        border-radius: 10px;
        background: #a5d6a7;
        position: relative;
        overflow: hidden;
        box-shadow: 0 8px 16px rgba(0,0,0,0.3);
    }
    .river {
        position: absolute;
        top: 120px;
        left: 0;
        width: 100%;
        height: 160px;
        background: linear-gradient(180deg, #4facfe, #00f2fe);
        background-size: 40px 40px;
        animation: waves 3s infinite linear;
    }
    @keyframes waves {
        from { background-position: 0 0; }
        to { background-position: 40px 0; }
    }
    .character {
        font-size: 32px;
        cursor: pointer;
        position: absolute;
        transition: transform 0.3s ease, top 0.3s ease, left 0.3s ease;
    }
    .character:hover {
        transform: scale(1.3) rotate(5deg);
    }
    .boat {
        position: absolute;
        bottom: 120px;
        width: 100px;
        height: 45px;
        background: #8b4513;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: left 2s ease;
        z-index: 2;
        box-shadow: inset 0 0 8px #00000055;
        font-size: 28px;
    }
    .btn {
        margin-top: 15px;
        padding: 10px 18px;
        font-size: 16px;
        background: linear-gradient(45deg, #28a745, #4caf50);
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        transition: transform 0.2s ease;
    }
    .btn:hover {
        transform: scale(1.1);
    }
</style>
</head>
<body>

<h1>â›µ Missionaries & Cannibals</h1>
<div class="game-container" id="game">
    <div class="river"></div>
    <div class="boat" id="boat" style="left: 140px;">ðŸš¤</div>
</div>
<button class="btn" onclick="moveBoat()">Move Boat</button>

<script>
let leftBank = [
    {type: 'M', icon: 'ðŸ˜‡'},
    {type: 'M', icon: 'ðŸ˜‡'},
    {type: 'M', icon: 'ðŸ˜‡'},
    {type: 'C', icon: 'ðŸ˜ˆ'},
    {type: 'C', icon: 'ðŸ˜ˆ'},
    {type: 'C', icon: 'ðŸ˜ˆ'}
];
let rightBank = [];
let boat = [];
let boatOnLeft = true;

const game = document.getElementById("game");
const boatEl = document.getElementById("boat");

function render() {
    document.querySelectorAll('.character').forEach(el => el.remove());
    let leftY = 30, rightY = 30;
    leftBank.forEach((p, i) => {
        const char = createCharacter(p.icon, i, 'L');
        char.style.left = "40px";
        char.style.top = leftY + "px";
        leftY += 40;
        game.appendChild(char);
    });
    rightBank.forEach((p, i) => {
        const char = createCharacter(p.icon, i, 'R');
        char.style.left = "720px";
        char.style.top = rightY + "px";
        rightY += 40;
        game.appendChild(char);
    });
    boat.forEach((p, i) => {
        const char = createCharacter(p.icon, i, 'B');
        char.style.left = (parseInt(boatEl.style.left) + 20) + "px";
        char.style.top = "100px";
        game.appendChild(char);
    });
}

function createCharacter(icon, index, side) {
    const char = document.createElement('div');
    char.className = 'character';
    char.innerHTML = icon;
    char.onclick = () => {
        if (side === 'L' && boatOnLeft && boat.length < 2) {
            boat.push(leftBank.splice(index, 1)[0]);
        } else if (side === 'R' && !boatOnLeft && boat.length < 2) {
            boat.push(rightBank.splice(index, 1)[0]);
        } else if (side === 'B') {
            if (boatOnLeft) {
                leftBank.push(boat.splice(index, 1)[0]);
            } else {
                rightBank.push(boat.splice(index, 1)[0]);
            }
        }
        render();
    };
    return char;
}

function isGameOver(bank) {
    const m = bank.filter(p => p.type === 'M').length;
    const c = bank.filter(p => p.type === 'C').length;
    return m > 0 && c > m; 
}

function checkGameState() {
    if (rightBank.length === 6) {
        setTimeout(() => alert("ðŸŽ‰ You Win! All safe on the right bank!"), 200);
        return true;
    }
    if (isGameOver(leftBank) || isGameOver(rightBank)) {
        setTimeout(() => alert("ðŸ’€ Game Over! Cannibals ate the missionaries!"), 200);
        return true;
    }
    return false;
}

function moveBoat() {
    if (boat.length === 0) return alert("Boat is empty!");
    boatOnLeft = !boatOnLeft;
    boatEl.style.left = boatOnLeft ? "140px" : "570px";
    setTimeout(() => {
        if (boatOnLeft) {
            leftBank.push(...boat);
        } else {
            rightBank.push(...boat);
        }
        boat = [];
        render();
        checkGameState();
    }, 2000);
}

render();
</script>

</body>
</html>
